---
source: crates/spelldawn/tests/it/rules/actions.rs
assertion_line: 68
expression: response

---
Ok(
    GameResponse {
        command_list: CommandList {
            commands: [
                GameCommand {
                    command: Some(
                        UpdateGameView(
                            UpdateGameViewCommand {
                                game: Some(
                                    GameView {
                                        game_id: Some(
                                            GameIdentifier {
                                                value: 1,
                                            },
                                        ),
                                        user: Some(
                                            PlayerView {
                                                player_info: None,
                                                score: Some(
                                                    ScoreView {
                                                        score: 0,
                                                    },
                                                ),
                                                mana: Some(
                                                    ManaView {
                                                        amount: 9,
                                                    },
                                                ),
                                                action_tracker: Some(
                                                    ActionTrackerView {
                                                        available_action_count: 2,
                                                    },
                                                ),
                                            },
                                        ),
                                        opponent: Some(
                                            PlayerView {
                                                player_info: None,
                                                score: Some(
                                                    ScoreView {
                                                        score: 0,
                                                    },
                                                ),
                                                mana: Some(
                                                    ManaView {
                                                        amount: 5,
                                                    },
                                                ),
                                                action_tracker: Some(
                                                    ActionTrackerView {
                                                        available_action_count: 3,
                                                    },
                                                ),
                                            },
                                        ),
                                        arena: None,
                                        current_priority: User,
                                    },
                                ),
                            },
                        ),
                    ),
                },
                GameCommand {
                    command: Some(
                        CreateOrUpdateCard(
                            CreateOrUpdateCardCommand {
                                card: Some(
                                    CardView {
                                        card_id: Some(
                                            CardIdentifier {
                                                side: Champion,
                                                index: 1,
                                            },
                                        ),
                                        card_icons: Some(
                                            CardIcons {
                                                top_left_icon: Some(
                                                    CardIcon {
                                                        background: Some(
                                                            SpriteAddress {
                                                                address: "LittleSweetDaemon/TCG_Card_Fantasy_Design/Icons/Icon_Mana_Color_01",
                                                            },
                                                        ),
                                                        text: "5",
                                                        background_scale: 1.0,
                                                    },
                                                ),
                                                top_right_icon: None,
                                                bottom_right_icon: None,
                                                bottom_left_icon: None,
                                                arena_icon: None,
                                            },
                                        ),
                                        arena_frame: Some(
                                            SpriteAddress {
                                                address: "SpriteWay/Icons/Clean Frames/9020",
                                            },
                                        ),
                                        owning_player: User,
                                        revealed_card: Some(
                                            RevealedCardView {
                                                card_frame: Some(
                                                    SpriteAddress {
                                                        address: "LittleSweetDaemon/TCG_Card_Fantasy_Design/Cards/Card_Steampunk_Style_Color_1",
                                                    },
                                                ),
                                                title_background: Some(
                                                    SpriteAddress {
                                                        address: "LittleSweetDaemon/TCG_Card_Design/Warrior_Card/Warrior_Card Face_Tape",
                                                    },
                                                ),
                                                jewel: Some(
                                                    SpriteAddress {
                                                        address: "LittleSweetDaemon/TCG_Card_Fantasy_Design/Jewels/Jewel_Elf_Color_01",
                                                    },
                                                ),
                                                image: Some(
                                                    SpriteAddress {
                                                        address: "Rexard/SpellBookPage01/SpellBookPage01_png/SpellBook01_24",
                                                    },
                                                ),
                                                title: Some(
                                                    CardTitle {
                                                        text: "Arcane Recovery",
                                                    },
                                                ),
                                                rules_text: Some(
                                                    RulesText {
                                                        text: "Gain 9\u{f06d}",
                                                    },
                                                ),
                                                revealed_in_arena: true,
                                                targeting: Some(
                                                    CardTargeting {
                                                        targeting: None,
                                                    },
                                                ),
                                                on_release_position: Some(
                                                    ObjectPosition {
                                                        sorting_key: 4294967295,
                                                        position: Some(
                                                            Staging(
                                                                ObjectPositionStaging,
                                                            ),
                                                        ),
                                                    },
                                                ),
                                                cost: Some(
                                                    CardViewCost {
                                                        mana_cost: 5,
                                                        action_cost: 1,
                                                        can_play: true,
                                                        can_play_algorithm: Optimistic,
                                                        spend_cost_algorithm: Optimistic,
                                                    },
                                                ),
                                                supplemental_info: None,
                                            },
                                        ),
                                    },
                                ),
                                create_position: Some(
                                    ObjectPosition {
                                        sorting_key: 2,
                                        position: Some(
                                            DiscardPile(
                                                ObjectPositionDiscardPile {
                                                    owner: User,
                                                },
                                            ),
                                        ),
                                    },
                                ),
                                create_animation: Unspecified,
                                disable_flip_animation: false,
                            },
                        ),
                    ),
                },
                GameCommand {
                    command: Some(
                        MoveGameObjects(
                            MoveGameObjectsCommand {
                                ids: [
                                    GameObjectIdentifier {
                                        id: Some(
                                            CardId(
                                                CardIdentifier {
                                                    side: Champion,
                                                    index: 1,
                                                },
                                            ),
                                        ),
                                    },
                                ],
                                position: Some(
                                    ObjectPosition {
                                        sorting_key: 2,
                                        position: Some(
                                            DiscardPile(
                                                ObjectPositionDiscardPile {
                                                    owner: User,
                                                },
                                            ),
                                        ),
                                    },
                                ),
                                disable_animation: false,
                            },
                        ),
                    ),
                },
            ],
        },
        channel_responses: [
            (
                2,
                CommandList {
                    commands: [
                        GameCommand {
                            command: Some(
                                UpdateGameView(
                                    UpdateGameViewCommand {
                                        game: Some(
                                            GameView {
                                                game_id: Some(
                                                    GameIdentifier {
                                                        value: 1,
                                                    },
                                                ),
                                                user: Some(
                                                    PlayerView {
                                                        player_info: None,
                                                        score: Some(
                                                            ScoreView {
                                                                score: 0,
                                                            },
                                                        ),
                                                        mana: Some(
                                                            ManaView {
                                                                amount: 5,
                                                            },
                                                        ),
                                                        action_tracker: Some(
                                                            ActionTrackerView {
                                                                available_action_count: 3,
                                                            },
                                                        ),
                                                    },
                                                ),
                                                opponent: Some(
                                                    PlayerView {
                                                        player_info: None,
                                                        score: Some(
                                                            ScoreView {
                                                                score: 0,
                                                            },
                                                        ),
                                                        mana: Some(
                                                            ManaView {
                                                                amount: 9,
                                                            },
                                                        ),
                                                        action_tracker: Some(
                                                            ActionTrackerView {
                                                                available_action_count: 2,
                                                            },
                                                        ),
                                                    },
                                                ),
                                                arena: None,
                                                current_priority: Opponent,
                                            },
                                        ),
                                    },
                                ),
                            ),
                        },
                        GameCommand {
                            command: Some(
                                CreateOrUpdateCard(
                                    CreateOrUpdateCardCommand {
                                        card: Some(
                                            CardView {
                                                card_id: Some(
                                                    CardIdentifier {
                                                        side: Champion,
                                                        index: 1,
                                                    },
                                                ),
                                                card_icons: Some(
                                                    CardIcons {
                                                        top_left_icon: Some(
                                                            CardIcon {
                                                                background: Some(
                                                                    SpriteAddress {
                                                                        address: "LittleSweetDaemon/TCG_Card_Fantasy_Design/Icons/Icon_Mana_Color_01",
                                                                    },
                                                                ),
                                                                text: "5",
                                                                background_scale: 1.0,
                                                            },
                                                        ),
                                                        top_right_icon: None,
                                                        bottom_right_icon: None,
                                                        bottom_left_icon: None,
                                                        arena_icon: None,
                                                    },
                                                ),
                                                arena_frame: Some(
                                                    SpriteAddress {
                                                        address: "SpriteWay/Icons/Clean Frames/9020",
                                                    },
                                                ),
                                                owning_player: Opponent,
                                                revealed_card: Some(
                                                    RevealedCardView {
                                                        card_frame: Some(
                                                            SpriteAddress {
                                                                address: "LittleSweetDaemon/TCG_Card_Fantasy_Design/Cards/Card_Steampunk_Style_Color_1",
                                                            },
                                                        ),
                                                        title_background: Some(
                                                            SpriteAddress {
                                                                address: "LittleSweetDaemon/TCG_Card_Design/Warrior_Card/Warrior_Card Face_Tape",
                                                            },
                                                        ),
                                                        jewel: Some(
                                                            SpriteAddress {
                                                                address: "LittleSweetDaemon/TCG_Card_Fantasy_Design/Jewels/Jewel_Elf_Color_01",
                                                            },
                                                        ),
                                                        image: Some(
                                                            SpriteAddress {
                                                                address: "Rexard/SpellBookPage01/SpellBookPage01_png/SpellBook01_24",
                                                            },
                                                        ),
                                                        title: Some(
                                                            CardTitle {
                                                                text: "Arcane Recovery",
                                                            },
                                                        ),
                                                        rules_text: Some(
                                                            RulesText {
                                                                text: "Gain 9\u{f06d}",
                                                            },
                                                        ),
                                                        revealed_in_arena: true,
                                                        targeting: Some(
                                                            CardTargeting {
                                                                targeting: None,
                                                            },
                                                        ),
                                                        on_release_position: Some(
                                                            ObjectPosition {
                                                                sorting_key: 4294967295,
                                                                position: Some(
                                                                    Staging(
                                                                        ObjectPositionStaging,
                                                                    ),
                                                                ),
                                                            },
                                                        ),
                                                        cost: Some(
                                                            CardViewCost {
                                                                mana_cost: 5,
                                                                action_cost: 1,
                                                                can_play: false,
                                                                can_play_algorithm: Optimistic,
                                                                spend_cost_algorithm: Optimistic,
                                                            },
                                                        ),
                                                        supplemental_info: None,
                                                    },
                                                ),
                                            },
                                        ),
                                        create_position: Some(
                                            ObjectPosition {
                                                sorting_key: 2,
                                                position: Some(
                                                    DiscardPile(
                                                        ObjectPositionDiscardPile {
                                                            owner: Opponent,
                                                        },
                                                    ),
                                                ),
                                            },
                                        ),
                                        create_animation: Unspecified,
                                        disable_flip_animation: false,
                                    },
                                ),
                            ),
                        },
                        GameCommand {
                            command: Some(
                                MoveGameObjects(
                                    MoveGameObjectsCommand {
                                        ids: [
                                            GameObjectIdentifier {
                                                id: Some(
                                                    CardId(
                                                        CardIdentifier {
                                                            side: Champion,
                                                            index: 1,
                                                        },
                                                    ),
                                                ),
                                            },
                                        ],
                                        position: Some(
                                            ObjectPosition {
                                                sorting_key: 0,
                                                position: Some(
                                                    Staging(
                                                        ObjectPositionStaging,
                                                    ),
                                                ),
                                            },
                                        ),
                                        disable_animation: false,
                                    },
                                ),
                            ),
                        },
                        GameCommand {
                            command: Some(
                                Delay(
                                    DelayCommand {
                                        duration: Some(
                                            TimeValue {
                                                milliseconds: 1500,
                                            },
                                        ),
                                    },
                                ),
                            ),
                        },
                        GameCommand {
                            command: Some(
                                MoveGameObjects(
                                    MoveGameObjectsCommand {
                                        ids: [
                                            GameObjectIdentifier {
                                                id: Some(
                                                    CardId(
                                                        CardIdentifier {
                                                            side: Champion,
                                                            index: 1,
                                                        },
                                                    ),
                                                ),
                                            },
                                        ],
                                        position: Some(
                                            ObjectPosition {
                                                sorting_key: 2,
                                                position: Some(
                                                    DiscardPile(
                                                        ObjectPositionDiscardPile {
                                                            owner: Opponent,
                                                        },
                                                    ),
                                                ),
                                            },
                                        ),
                                        disable_animation: false,
                                    },
                                ),
                            ),
                        },
                    ],
                },
            ),
        ],
    },
)
